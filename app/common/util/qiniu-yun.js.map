{
    "version": 3,
    "sources": [
        "..\\..\\..\\src\\common\\util\\qiniu-yun.js"
    ],
    "names": [],
    "mappings": ";;;;;;;;AACA,SAAS,MAAT,CAAgB,OAAhB,EAAwB,QAAxB,EAAiC;AAC/B,MAAI,QAAQ,QAAQ,OAAR,CAAR,CAD2B;AAE/B,MAAI,SAAO,MAAM,MAAN,CAAa,KAAb,EAAoB,KAApB;;;AAFoB,OAK/B,CAAM,IAAN,CAAW,UAAX,GAAwB,OAAO,EAAP,CALO;AAM/B,QAAM,IAAN,CAAW,UAAX,GAAwB,OAAO,EAAP;;;AANO,MAS3B,SAAS,OAAO,MAAP;;;AATkB,MAY3B,MAAM,QAAN;;;AAZ2B,WAetB,OAAT,CAAiB,MAAjB,EAAyB,GAAzB,EAA8B;AAC5B,QAAI,YAAY,IAAI,MAAM,EAAN,CAAS,SAAT,CAAmB,SAAO,GAAP,GAAW,GAAX,CAAnC,CADwB;AAE5B,WAAO,UAAU,KAAV,EAAP,CAF4B;GAA9B;;;AAf+B,MAqB3B,QAAQ,QAAQ,MAAR,EAAgB,GAAhB,CAAR;;;AArB2B,MAwB3B,WAAW,OAAX;;;;;;;;;;;;;;;;;;AAxB2B,SA0CxB,sBAAY,UAAS,OAAT,EAAiB,MAAjB,EAAwB;AACzC,QAAI,QAAQ,IAAI,MAAM,EAAN,CAAS,QAAT,EAAZ,CADqC;AAEvC,UAAM,EAAN,CAAS,OAAT,CAAiB,KAAjB,EAAwB,GAAxB,EAA6B,QAA7B,EAAuC,KAAvC,EAA8C,UAAS,GAAT,EAAc,GAAd,EAAmB;AAC/D,UAAG,CAAC,GAAD,EAAM;;AAEP,gBAAQ,GAAR,EAFO;OAAT,MAGO;;AAEL,eAAO,GAAP,EAFK;OAHP;KAD4C,CAA9C,CAFuC;GAAxB,CAAnB,CA1C+B;CAAjC;;AAwDA,QAAQ,MAAR,GAAe,MAAf",
    "file": "..\\..\\..\\src\\common\\util\\qiniu-yun.js",
    "sourcesContent": [
        "\r\nfunction upload(srcPath,destPath){\r\n  var qiniu = require(\"qiniu\");\r\n  var config=think.config('app').qiniu;\r\n\r\n  //需要填写你的 Access Key 和 Secret Key\r\n  qiniu.conf.ACCESS_KEY = config.ak;\r\n  qiniu.conf.SECRET_KEY = config.sk;\r\n\r\n  //要上传的空间\r\n  var bucket = config.bucket;\r\n\r\n  //上传到七牛后保存的文件名\r\n  var key = destPath;\r\n\r\n  //构建上传策略函数\r\n  function uptoken(bucket, key) {\r\n    var putPolicy = new qiniu.rs.PutPolicy(bucket+\":\"+key);\r\n    return putPolicy.token();\r\n  }\r\n\r\n  //生成上传 Token\r\n  var token = uptoken(bucket, key);\r\n\r\n  //要上传文件的本地路径\r\n  var filePath = srcPath;\r\n\r\n  //构造上传函数\r\n  // function uploadFile(uptoken, key, localFile) {\r\n  //   var extra = new qiniu.io.PutExtra();\r\n  //     qiniu.io.putFile(uptoken, key, localFile, extra, function(err, ret) {\r\n  //       if(!err) {\r\n  //         // 上传成功， 处理返回值\r\n  //         console.log(ret.hash, ret.key, ret.persistentId);\r\n  //       } else {\r\n  //         // 上传失败， 处理返回代码\r\n  //         console.log(err);\r\n  //       }\r\n  //   });\r\n  // }\r\n  //\r\n  // //调用uploadFile上传\r\n  // uploadFile(token, key, filePath);\r\n  return new Promise(function(resolve,reject){\r\n    var extra = new qiniu.io.PutExtra();\r\n      qiniu.io.putFile(token, key, filePath, extra, function(err, ret) {\r\n        if(!err) {\r\n          // 上传成功， 处理返回值\r\n          resolve(ret);\r\n        } else {\r\n          // 上传失败， 处理返回代码\r\n          reject(err);\r\n        }\r\n    });\r\n  });\r\n}\r\n\r\nexports.upload=upload;\r\n"
    ]
}