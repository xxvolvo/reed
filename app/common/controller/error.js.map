{
    "version": 3,
    "sources": [
        "..\\..\\..\\src\\common\\controller\\error.js"
    ],
    "names": [],
    "mappings": "AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;mBAUE,qCAAa,QAAO;;;;AAGlB,QAAG,MAAM,GAAN,KAAc,YAAd,EAA2B;AAC5B,WAAK,IAAL,CAAU,KAAV,GAAkB,IAAlB,CAD4B;KAA9B;;AAIA,QAAI,cAAc,KAAK,MAAL,CAAY,OAAZ,CAAd,CAPc;AAQlB,QAAI,UAAU,KAAK,IAAL,CAAU,KAAV,IAAmB,KAAK,IAAL,CAAU,KAAV,CAAgB,OAAhB,IAA2B,EAA9C,CARI;AASlB,QAAG,KAAK,OAAL,EAAH,EAAkB;;;AAChB,aAAO,KAAK,KAAL,sBACJ,YAAY,GAAZ,IAAkB,eAClB,YAAY,GAAZ,IAAkB,gBAFd,CAAP,CADgB;KAAlB,MAKM,IAAG,KAAK,MAAL,EAAH,EAAiB;AACrB,aAAO,KAAK,IAAL,CAAU,MAAV,EAAkB,OAAlB,CAAP,CADqB;KAAjB;;AAIN,QAAI,SAAS,QAAT,CAlBc;AAmBlB,QAAG,MAAM,IAAN,KAAe,MAAM,WAAN,EAAkB;AAClC,eAAS,KAAK,MAAL,CAAY,gBAAZ,CAAT,CADkC;KAApC;AAGA,QAAI,OAAU,qBAAgB,gBAA1B,CAtBc;AAuBlB,QAAI,UAAU,KAAK,MAAL,CAAY,KAAZ,CAAV,CAvBc;AAwBlB,cAAU,MAAM,MAAN,CAAa,EAAb,EAAiB,OAAjB,EAA0B,EAAC,MAAM,MAAN,EAAc,WAAW,GAAX,EAAzC,CAAV,CAxBkB;AAyBlB,SAAK,KAAL,CAAW,IAAX,EAAiB,EAAjB,EAAqB,OAArB,EAA8B,IAA9B,CAAmC,mBAAW;AAC5C,gBAAU,QAAQ,OAAR,CAAgB,eAAhB,EAAiC,OAAjC,CAAV,CAD4C;AAE5C,aAAK,IAAL,CAAU,QAAQ,YAAR,CAAV,CAF4C;AAG5C,aAAK,GAAL,CAAS,OAAT,EAH4C;KAAX,CAAnC,CAzBkB;;;;;;;;mBAmCpB,mCAAY;AACV,WAAO,KAAK,YAAL,CAAkB,GAAlB,CAAP,CADU;;;;;;;;mBAOZ,mCAAY;AACV,WAAO,KAAK,YAAL,CAAkB,GAAlB,CAAP,CADU;;;;;;;;mBAOZ,mCAAY;AACV,WAAO,KAAK,YAAL,CAAkB,GAAlB,CAAP,CADU;;;;;;;;mBAOZ,mCAAY;AACV,WAAO,KAAK,YAAL,CAAkB,GAAlB,CAAP,CADU;;;;;;;;mBAOZ,mCAAY;AACV,WAAO,KAAK,YAAL,CAAkB,GAAlB,CAAP,CADU;;;;;;;;mBAON;;UACA,MACA;;;;;AADA,qBAAO,KAAK,MAAL,CAAY,OAAZ;;qBACO,KAAK,OAAL,CAAa,KAAK,YAAL;;;AAA3B;;kBACC;;;;;AACH,sBAAQ,MAAM,IAAN,CAAW,EAAX,CAAR;;qBACM,KAAK,OAAL,CAAa,KAAK,YAAL,EAAmB,KAAhC;;;AAER,mBAAK,IAAL,CAAU,IAAV,GAAiB,MAAjB,CAAwB,KAAK,SAAL,EAAgB,KAAxC;+CACO,KAAK,YAAL,CAAkB,GAAlB;;;;;;;;;;;;;;;;;;EApFkB,MAAM,UAAN,CAAiB,IAAjB",
    "file": "..\\..\\..\\src\\common\\controller\\error.js",
    "sourcesContent": [
        "'use strict';\n/**\n * error controller\n */\nexport default class extends think.controller.base {\n  /**\n   * display error page\n   * @param  {Number} status []\n   * @return {Promise}        []\n   */\n  displayError(status){\n\n    //hide error message on production env\n    if(think.env === 'production'){\n      this.http.error = null;\n    }\n\n    let errorConfig = this.config('error');\n    let message = this.http.error && this.http.error.message || '';\n    if(this.isJsonp()){\n      return this.jsonp({\n        [errorConfig.key]: status,\n        [errorConfig.msg]: message\n      })\n    }else if(this.isAjax()){\n      return this.fail(status, message);\n    }\n\n    let module = 'common';\n    if(think.mode !== think.mode_module){\n      module = this.config('default_module');\n    }\n    let file = `${module}/error/${status}.html`;\n    let options = this.config('tpl');\n    options = think.extend({}, options, {type: 'base', file_depr: '_'});\n    this.fetch(file, {}, options).then(content => {\n      content = content.replace('ERROR_MESSAGE', message);\n      this.type(options.content_type);\n      this.end(content);\n    });\n  }\n  /**\n   * Bad Request\n   * @return {Promise} []\n   */\n  _400Action(){\n    return this.displayError(400);\n  }\n  /**\n   * Forbidden\n   * @return {Promise} []\n   */\n  _403Action(){\n    return this.displayError(403);\n  }\n  /**\n   * Not Found\n   * @return {Promise}      []\n   */\n  _404Action(){\n    return this.displayError(404);\n  }\n  /**\n   * Internal Server Error\n   * @return {Promise}      []\n   */\n  _500Action(){\n    return this.displayError(500);\n  }\n  /**\n   * Service Unavailable\n   * @return {Promise}      []\n   */\n  _503Action(){\n    return this.displayError(503);\n  }\n  /**\n   * User not logged in\n   * @return {Promise}     []\n   */\n  async _600Action(){\n    let csrf = this.config('icsrf');\n    let value = await this.session(csrf.session_name);\n    if (!value) {\n      value = think.uuid(32);\n      await this.session(csrf.session_name, value);\n    }\n    this.http.view().assign(csrf.form_name, value);\n    return this.displayError(600);\n  }\n}\n"
    ]
}